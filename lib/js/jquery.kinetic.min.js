!function(a){"use strict";var b={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},c="kinetic-settings",d="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()),a.support=a.support||{},a.extend(a.support,{touch:"ontouchend"in document});var e=function(){return!1},f=function(a,b){return 0===Math.floor(Math.abs(a))?0:a*b},g=function(a,b){var c=a;return a>0?a>b&&(c=b):0-b>a&&(c=0-b),c},h=function(a,b){this.removeClass(a.movingClass.up).removeClass(a.movingClass.down).removeClass(a.movingClass.left).removeClass(a.movingClass.right).removeClass(a.deceleratingClass.up).removeClass(a.deceleratingClass.down).removeClass(a.deceleratingClass.left).removeClass(a.deceleratingClass.right),a.velocity>0&&this.addClass(b.right),0>a.velocity&&this.addClass(b.left),a.velocityY>0&&this.addClass(b.down),0>a.velocityY&&this.addClass(b.up)},i=function(a,b){b.velocity=0,b.velocityY=0,b.decelerate=!0,"function"==typeof b.stopped&&b.stopped.call(a,b)},j=function(a,b){var c=a[0];b.x&&c.scrollWidth>0?(c.scrollLeft=b.scrollLeft=c.scrollLeft+b.velocity,Math.abs(b.velocity)>0&&(b.velocity=b.decelerate?f(b.velocity,b.slowdown):b.velocity)):b.velocity=0,b.y&&c.scrollHeight>0?(c.scrollTop=b.scrollTop=c.scrollTop+b.velocityY,Math.abs(b.velocityY)>0&&(b.velocityY=b.decelerate?f(b.velocityY,b.slowdown):b.velocityY)):b.velocityY=0,h.call(a,b,b.deceleratingClass),"function"==typeof b.moved&&b.moved.call(a,b),Math.abs(b.velocity)>0||Math.abs(b.velocityY)>0?window.requestAnimationFrame(function(){j(a,b)}):i(a,b)},k=function(b){var d=a.kinetic.callMethods[b],e=Array.prototype.slice.call(arguments);d&&this.each(function(){var b=e.slice(1),f=a(this).data(c);b.unshift(f),d.apply(this,b)})},l=function(b,c){b[0],a.support.touch?b.bind("touchstart",c.events.touchStart).bind("touchend",c.events.inputEnd).bind("touchmove",c.events.touchMove):b.mousedown(c.events.inputDown).mouseup(c.events.inputEnd).mousemove(c.events.inputMove),b.click(c.events.inputClick).scroll(c.events.scroll).bind("selectstart",e).bind("dragstart",c.events.dragStart)},m=function(b,c){b[0],a.support.touch?b.unbind("touchstart",c.events.touchStart).unbind("touchend",c.events.inputEnd).unbind("touchmove",c.events.touchMove):b.unbind("mousedown",c.events.inputDown).unbind("mouseup",c.events.inputEnd).unbind("mousemove",c.events.inputMove).unbind("scroll",c.events.scroll),b.unbind("click",c.events.inputClick).unbind("selectstart",e),b.unbind("dragstart",c.events.dragStart)},n=function(e){this.addClass(d).each(function(){var d=this,f=a(this);if(!f.data(c)){var i,k,m,n,o=a.extend({},b,e),p=!1,q=!1,r=!1,s=1e3/o.throttleFPS;o.velocity=0,o.velocityY=0;var t=function(){i=!1,k=!1,r=!1};a(document).mouseup(t).click(t);var u=function(){o.velocity=g(p-i,o.maxvelocity),o.velocityY=g(q-k,o.maxvelocity)},v=function(b){return a.isFunction(o.filterTarget)?o.filterTarget.call(d,b)!==!1:!0},w=function(a,b){r=!0,o.velocity=p=0,o.velocityY=q=0,i=a,k=b},x=function(){i&&p&&o.decelerate===!1&&(o.decelerate=!0,u(),i=p=r=!1,j(f,o))},y=function(b,c){(!m||new Date>new Date(m.getTime()+s))&&(m=new Date,r&&(i||k)&&(n&&(a(n).blur(),n=null,f.focus()),o.decelerate=!1,o.velocity=o.velocityY=0,f[0].scrollLeft=o.scrollLeft=o.x?f[0].scrollLeft-(b-i):f[0].scrollLeft,f[0].scrollTop=o.scrollTop=o.y?f[0].scrollTop-(c-k):f[0].scrollTop,p=i,q=k,i=b,k=c,u(),h.call(f,o,o.movingClass),"function"==typeof o.moved&&o.moved.call(f,o)))};o.events={touchStart:function(a){var b;v(a.target)&&(b=a.originalEvent.touches[0],w(b.clientX,b.clientY),a.stopPropagation())},touchMove:function(a){var b;r&&(b=a.originalEvent.touches[0],y(b.clientX,b.clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){v(a.target)&&(w(a.clientX,a.clientY),n=a.target,"IMG"===a.target.nodeName&&a.preventDefault(),a.stopPropagation())},inputEnd:function(a){x(),n=null,a.preventDefault&&a.preventDefault()},inputMove:function(a){r&&(y(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},scroll:function(a){"function"==typeof o.moved&&o.moved.call(f,o),a.preventDefault&&a.preventDefault()},inputClick:function(a){return Math.abs(o.velocity)>0?(a.preventDefault(),!1):void 0},dragStart:function(){return n?!1:void 0}},l(f,o),f.data(c,o).css("cursor",o.cursor),o.triggerHardware&&f.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}})};a.kinetic={settingsKey:c,callMethods:{start:function(b,c){var d=a(this);b=a.extend(b,c),b&&(b.decelerate=!1,j(d,b))},end:function(b){a(this),b&&(b.decelerate=!0)},stop:function(b){var c=a(this);i(c,b)},detach:function(b){var c=a(this);m(c,b),c.removeClass(d).css("cursor","")},attach:function(b){var c=a(this);l(c,b),c.addClass(d).css("cursor","move")}}},a.fn.kinetic=function(a){return"string"==typeof a?k.apply(this,arguments):n.call(this,a),this}}(window.jQuery||window.Zepto);